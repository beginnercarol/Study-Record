<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Exp</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
<style type="text/css">
*{
	margin:0;
	padding:0;
  box-sizing: border-box;
}
.container{
  width:100%;
  height:100%;
  position:relative;
}
.box{
  float:left;
  padding:20px 0 0 20px;
}
.pic{
  width:200px;
  padding:10px;
  border:1px solid black;
  border-radius:5px;
  box-shadow: 0 0 5px #ccc;
}
img{
  width:100%;
}
</style>
</head>
<body>
<div class="container">
  <div class="box">
    <div class="pic">
      <img src="./img/bg1.jpg" /> 
    </div>
  </div>
    <div class="box">
    <div class="pic">
      <img src="./img/food.jpg" /> 
    </div>
  </div>
    <div class="box">
    <div class="pic">
      <img src="./img/breakfast.jpg" /> 
    </div>
  </div>
    <div class="box">
    <div class="pic">
      <img src="./img/bg4.jpg" /> 
    </div>
  </div>
    <div class="box">
    <div class="pic">
      <img src="./img/bg5.jpg" /> 
    </div>
  </div>
    <div class="box">
    <div class="pic">
      <img src="./img/backpack.jpg" /> 
    </div>
  </div>
   <div class="box">
    <div class="pic">
      <img src="./img/bg1.jpg" /> 
    </div>
  </div>
    <div class="box">
    <div class="pic">
      <img src="./img/bg2.jpg" /> 
    </div>
  </div>
    <div class="box">
    <div class="pic">
      <img src="./img/bg3.jpg" /> 
    </div>
  </div>
    <div class="box">
    <div class="pic">
      <img src="./img/food.jpg" /> 
    </div>
  </div>
    <div class="box">
    <div class="pic">
      <img src="./img/bg5.jpg" /> 
    </div>
  </div>
    <div class="box">
    <div class="pic">
      <img src="./img/bg6.jpg" /> 
    </div>
  </div>
   <div class="box">
    <div class="pic">
      <img src="./img/bg1.jpg" /> 
    </div>
  </div>
    <div class="box">
    <div class="pic">
      <img src="./img/bg2.jpg" /> 
    </div>
  </div>
    <div class="box">
    <div class="pic">
      <img src="./img/food.jpg" /> 
    </div>
  </div>
    <div class="box">
    <div class="pic">
      <img src="./img/bg4.jpg" /> 
    </div>
  </div>
    <div class="box">
    <div class="pic">
      <img src="./img/bg5.jpg" /> 
    </div>
  </div>
    <div class="box">
    <div class="pic">
      <img src="./img/bg6.jpg" /> 
    </div>
  </div>
</div>
<script>
window.onload = function(){
  waterfall('.container','.box');
  window.onscroll = function(){};
}

function waterfall(container,clsName){
  var oParent = document.querySelector(container);
  var oBoxes = oParent.querySelectorAll(clsName);
  var oBoxWidth = oBoxes[0].offsetWidth;
  var oParentWidth = document.documentElement.clientWidth;
  var cols = Math.floor(oParentWidth/oBoxWidth);
  oParent.style.cssText = "width:"+cols*oBoxWidth + "px;margin:0 auto;";
  var oBoxArr = [];
  for(let i=0;i<oBoxes.length;i++){
    if(i<cols){
      oBoxArr.push(oBoxes[i].offsetHeight);
    }
    if(i>=cols){
      console.log(oBoxArr);
      var minH = Math.min.apply(null,oBoxArr);
      var index = getMinIndex(oBoxArr,minH);
      console.log(index);
      oBoxes[i].style.cssText="position:absolute !important;top:"+minH+"px;left:"+index*oBoxWidth+"px;";
      setArr(oBoxArr,index,oBoxes[i].offsetHeight);
      console.log(oBoxArr);
    }
  }
}

function getMinIndex(hArr,min){
  for(let i=0;i<hArr.length;i++){
    if(min==hArr[i]){
      return i;
    }
  }
  
}
function setArr(hArr,index,value){
  hArr[index]+= value;
}

function checkScroll(objLast){
  
}



</script>
</body>
</html>